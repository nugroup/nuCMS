{% extends 'base.html.twig' %}

{% block subnav %}

    {% include 'language/subnav.html.twig' %}

{% endblock %}

{% block body %}

    <!-- page list -->
    <div class="container">

        <div id="updateProgress">

            <div class="progress">
                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                  <span class="sr-only"></span>
                </div>
            </div>

            <div class="alert alert-info">
                {{ lang('language.text.in_progress') }}
            </div>

        </div><!--/#updateProgress-->

        <div id="progressDone" style="display: none;">
            <div class="alert alert-success">{{ lang('langauge.alert.success.update_translations') }}</div>
        </div>

        <!-- margin -->
        <div class="clearfix baseMargin"></div>

    </div>

{% endblock %}

{% block javascript %}

    {{ parent() }}

    <script>

        $.post('{{ admin_url('language/update_translations_action/'~language.id) }}', function (response) {

            if (response.result === 2) {
                location.reload();
            }

            if (response.result === 1) {
                $('#updateProgress').hide();
                $('#progressDone').show();
            }

            if (response.result === 0) {
                alert(updateResult.errors);
            }

        });

    </script>

{% endblock %}