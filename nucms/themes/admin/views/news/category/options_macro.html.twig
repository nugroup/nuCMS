{% macro select_categories_tree(categories, key, level) %}

    {% for category in attribute(categories, key) %}
        
        <option value="{{ category.news_category_id }}">
            {% if level > 0 %}

                {% for i in 1..level %}--{% endfor %}

            {% endif %}
            {{ category.name }}
        </option>
        
        {% if attribute(categories, category.news_category_id) %}

            {{ _self.select_categories_tree(categories, category.news_category_id, level + 1) }}

        {% endif %}
        
    {% endfor %}
    
{% endmacro %}